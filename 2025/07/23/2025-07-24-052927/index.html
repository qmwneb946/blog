<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>AR与物理世界的虚实融合：一场深度物理模拟之旅 | qmwneb946 的博客</title><meta name="author" content="qmwneb946"><meta name="copyright" content="qmwneb946"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="你好，各位技术爱好者！我是 qmwneb946，今天我们将一同踏上一段激动人心的旅程，深入探索增强现实（AR）领域中一个至关重要的核心挑战与前沿技术：如何让虚拟对象与物理世界实现天衣无缝的融合，而不仅仅是简单的叠加。这不仅仅关乎视觉上的逼真，更深层次的挑战在于，如何让虚拟物体在物理层面上“感受”并“响应”我们真实世界的规律。这是一场关于计算机视觉、图形学、以及——你猜对了——物理学的深度融合之旅。">
<meta property="og:type" content="article">
<meta property="og:title" content="AR与物理世界的虚实融合：一场深度物理模拟之旅">
<meta property="og:url" content="https://qmwneb946.dpdns.org/2025/07/23/2025-07-24-052927/index.html">
<meta property="og:site_name" content="qmwneb946 的博客">
<meta property="og:description" content="你好，各位技术爱好者！我是 qmwneb946，今天我们将一同踏上一段激动人心的旅程，深入探索增强现实（AR）领域中一个至关重要的核心挑战与前沿技术：如何让虚拟对象与物理世界实现天衣无缝的融合，而不仅仅是简单的叠加。这不仅仅关乎视觉上的逼真，更深层次的挑战在于，如何让虚拟物体在物理层面上“感受”并“响应”我们真实世界的规律。这是一场关于计算机视觉、图形学、以及——你猜对了——物理学的深度融合之旅。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://qmwneb946.dpdns.org/img/icon.png">
<meta property="article:published_time" content="2025-07-23T21:29:27.000Z">
<meta property="article:modified_time" content="2025-07-26T07:58:51.021Z">
<meta property="article:author" content="qmwneb946">
<meta property="article:tag" content="2025">
<meta property="article:tag" content="技术">
<meta property="article:tag" content="AR与物理世界的虚实融合">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://qmwneb946.dpdns.org/img/icon.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "AR与物理世界的虚实融合：一场深度物理模拟之旅",
  "url": "https://qmwneb946.dpdns.org/2025/07/23/2025-07-24-052927/",
  "image": "https://qmwneb946.dpdns.org/img/icon.png",
  "datePublished": "2025-07-23T21:29:27.000Z",
  "dateModified": "2025-07-26T07:58:51.021Z",
  "author": [
    {
      "@type": "Person",
      "name": "qmwneb946",
      "url": "https://github.com/qmwneb946"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://qmwneb946.dpdns.org/2025/07/23/2025-07-24-052927/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'AR与物理世界的虚实融合：一场深度物理模拟之旅',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2845632165165414" crossorigin="anonymous"></script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="qmwneb946 的博客" type="application/atom+xml">
</head><body><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">qmwneb946 的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">AR与物理世界的虚实融合：一场深度物理模拟之旅</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">AR与物理世界的虚实融合：一场深度物理模拟之旅<a class="post-edit-link" href="https://github.com/qmwneb946/blog/edit/main/source/_posts/2025-07-24-052927.md" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-23T21:29:27.000Z" title="发表于 2025-07-24 05:29:27">2025-07-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-07-26T07:58:51.021Z" title="更新于 2025-07-26 15:58:51">2025-07-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="container post-content" id="article-container"><p>你好，各位技术爱好者！我是 qmwneb946，今天我们将一同踏上一段激动人心的旅程，深入探索增强现实（AR）领域中一个至关重要的核心挑战与前沿技术：如何让虚拟对象与物理世界实现天衣无缝的融合，而不仅仅是简单的叠加。这不仅仅关乎视觉上的逼真，更深层次的挑战在于，如何让虚拟物体在物理层面上“感受”并“响应”我们真实世界的规律。这是一场关于计算机视觉、图形学、以及——你猜对了——物理学的深度融合之旅。</p>
<p>从早期仅能将数字贴图覆盖在现实场景中的AR应用，到如今能够感知环境、进行复杂互动的沉浸式体验，AR技术的发展日新月异。但真正将我们带入“未来”的，是那些能够以假乱真，甚至超越真实限制的虚实融合体验。想象一下，一个虚拟的球体在你的客厅地板上弹跳，发出与地板材质相符的声音，甚至能在真实的桌腿旁投下逼真的阴影，并被你真实的手所“触摸”和“推动”。这不再是魔术，而是计算机科学、数学和物理学共同编织的奇迹。</p>
<p>要实现这种深度融合，我们必须赋予AR系统理解物理世界的能力，并让虚拟世界严格遵循物理世界的法则。这需要解决一系列复杂的问题：AR系统如何“看到”并理解现实空间？它如何渲染出与现实光影完美契合的虚拟物体？更关键的是，它如何让虚拟物体在重力、碰撞、摩擦等物理规律下，与真实世界进行可信赖的互动？本文将带你一层层揭开这些谜团。</p>
<h2 id="第一章：感知与理解物理世界——AR的“眼睛”与“大脑”">第一章：感知与理解物理世界——AR的“眼睛”与“大脑”</h2>
<p>要让虚拟物体融入物理世界，首先AR系统必须能够准确地感知和理解这个世界。这就像人类的眼睛和大脑一样，需要视觉输入和对输入的智能处理。</p>
<h3 id="1-1-实时定位与地图构建（SLAM）">1.1 实时定位与地图构建（SLAM）</h3>
<p>SLAM（Simultaneous Localization and Mapping）是AR感知物理世界的基石。它允许设备在未知环境中同步确定自身位置，并构建环境地图。没有SLAM，AR应用就无法稳定地将虚拟内容锚定在现实空间中。</p>
<ul>
<li>
<p><strong>工作原理：</strong><br>
SLAM通常通过传感器数据（如摄像头图像、惯性测量单元IMU数据、深度传感器数据）来工作。它不断从环境中提取特征点（如图像中角点、纹理丰富的区域），并跟踪这些特征点在不同帧之间的运动。通过这些运动，系统可以估计设备的姿态（位置和方向），并同时增量地构建环境的3D地图。</p>
<p>视觉SLAM（Visual SLAM）是最常见的形式，如苹果的ARKit和谷歌的ARCore都大量依赖于此。它们通常使用以下核心组件：</p>
<ul>
<li><strong>特征点提取与匹配：</strong> 识别图像中具有辨识度的特征点（例如使用ORB、SIFT等算法），并在连续帧中匹配这些点。</li>
<li><strong>运动估计：</strong> 根据特征点的2D-2D或3D-2D对应关系，估计相机的相对运动。这通常通过求解最小化重投影误差的优化问题来实现。</li>
<li><strong>局部BA (Bundle Adjustment)：</strong> 对一小段时间内的相机姿态和特征点位置进行联合优化，以提高精度。</li>
<li><strong>回环检测 (Loop Closure Detection)：</strong> 当相机回到已经访问过的区域时，识别出这一点，并进行全局优化以校正累积误差，防止地图漂移。</li>
</ul>
<p>数学上，运动估计可以简化为求解一个位姿变换矩阵，通常通过最小化重投影误差来完成：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>E</mi><mo>=</mo><munder><mo>∑</mo><mi>i</mi></munder><mi mathvariant="normal">∣</mi><mi mathvariant="normal">∣</mi><msub><mi mathvariant="bold">p</mi><mi>i</mi></msub><mo>−</mo><mi mathvariant="normal">Π</mi><mo stretchy="false">(</mo><mi mathvariant="bold">K</mi><mo>⋅</mo><mo stretchy="false">[</mo><mi mathvariant="bold">R</mi><mi mathvariant="normal">∣</mi><mi mathvariant="bold">t</mi><mo stretchy="false">]</mo><mo>⋅</mo><msub><mi mathvariant="bold">P</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi><msup><mi mathvariant="normal">∣</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">E = \sum_{i} || \mathbf{p}_i - \Pi(\mathbf{K} \cdot [\mathbf{R} | \mathbf{t}] \cdot \mathbf{P}_i) ||^2
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3277em;vertical-align:-1.2777em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">∣∣</span><span class="mord"><span class="mord mathbf">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Π</span><span class="mopen">(</span><span class="mord mathbf">K</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathbf">R</span><span class="mord">∣</span><span class="mord mathbf">t</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="bold">p</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\mathbf{p}_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathbf">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是图像中特征点的2D坐标，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="bold">P</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\mathbf{P}_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8361em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是其对应的3D空间点，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">K</mi></mrow><annotation encoding="application/x-tex">\mathbf{K}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">K</span></span></span></span> 是相机内参矩阵，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi mathvariant="bold">R</mi><mi mathvariant="normal">∣</mi><mi mathvariant="bold">t</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[\mathbf{R} | \mathbf{t}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathbf">R</span><span class="mord">∣</span><span class="mord mathbf">t</span><span class="mclose">]</span></span></span></span> 是相机的旋转和平移矩阵，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Π</mi></mrow><annotation encoding="application/x-tex">\Pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Π</span></span></span></span> 是投影函数。</p>
</li>
<li>
<p><strong>传感器融合：</strong> 现代SLAM系统通常结合多种传感器。IMU（加速度计和陀螺仪）提供高频、短时稳定的运动数据，可以弥补视觉SLAM在快速运动或纹理缺失时的不足。而深度传感器（如LiDAR或结构光）则能直接获取场景的深度信息，极大地简化了3D重建的难度，提高了平面检测和环境理解的准确性。</p>
</li>
</ul>
<h3 id="1-2-环境理解与重建">1.2 环境理解与重建</h3>
<p>仅仅知道设备在哪是不够的，AR系统还需要知道周围环境的几何形状、表面类型，甚至语义信息。</p>
<ul>
<li><strong>平面检测：</strong> 这是最基础的环境理解功能。AR系统能够识别水平面（如地板、桌面）和垂直面（如墙壁）。这对于虚拟物体放置和交互至关重要。例如，一个虚拟桌子只能放在平坦的表面上。</li>
<li><strong>3D网格重建：</strong> 更高级的AR系统能够构建出物理环境的3D网格模型。这些网格可以是稀疏的点云，也可以是稠密的表面（Mesh）。这些网格是实现虚拟物体遮挡、碰撞检测等物理交互的基础。LiDAR传感器在这方面表现尤为突出，能够快速准确地生成高质量的深度图和网格。</li>
<li><strong>语义理解：</strong> 最先进的AR系统正在走向语义理解。这意味着系统不仅知道“这里有一个平面”，还能识别出“这是一个桌子”、“那是一把椅子”、“这是一扇门”。通过机器学习和深度学习模型，系统能够对场景中的物体进行分类和识别，从而为更智能的交互提供上下文信息。例如，AR应用可以自动将一个虚拟杯子放在“桌子”上，而不是“墙壁”上。</li>
</ul>
<h2 id="第二章：视觉融合的艺术——让虚拟物体“看”起来真实">第二章：视觉融合的艺术——让虚拟物体“看”起来真实</h2>
<p>一旦AR系统理解了物理世界，下一步就是让虚拟物体在视觉上与物理世界融为一体。这不仅是把虚拟模型放到现实画面中那么简单，还需要处理光影、材质和遮挡等复杂问题。</p>
<h3 id="2-1-物理渲染（PBR）">2.1 物理渲染（PBR）</h3>
<p>为了让虚拟物体看起来真实，我们必须模仿光线在真实世界中的行为。物理渲染（Physically Based Rendering, PBR）正是为此而生。PBR使用基于物理规律的着色模型，确保渲染出的材质在任何光照条件下都表现一致且真实。</p>
<ul>
<li>
<p><strong>核心参数：</strong><br>
PBR着色器通常使用以下核心参数来定义材质的外观：</p>
<ul>
<li><strong>反照率（Albedo）：</strong> 物体表面的固有颜色，不包含任何光照信息。</li>
<li><strong>金属度（Metallic）：</strong> 描述材质是金属还是非金属。金属通常具有反射光线的能力，而非金属则主要散射光线。</li>
<li><strong>粗糙度（Roughness）：</strong> 描述物体表面的光滑程度。粗糙的表面会使反射光线散射，产生模糊的反射，而光滑的表面则会产生清晰的镜面反射。</li>
<li><strong>法线贴图（Normal Map）：</strong> 用于模拟物体表面凹凸不平的细节，而无需增加几何体的面数。</li>
<li><strong>环境光遮蔽（Ambient Occlusion, AO）：</strong> 模拟物体缝隙和凹陷处由于被周围物体遮挡而接收不到环境光的情况，产生柔和的阴影。</li>
</ul>
</li>
<li>
<p><strong>数学模型：</strong><br>
PBR着色器通常基于微面元理论（Microfacet Theory），将物体表面看作由无数微小的反射面组成。这些微面元的法线方向各不相同，从而影响光的反射和散射。双向反射分布函数（Bidirectional Reflectance Distribution Function, BRDF）是描述光线如何与表面交互的核心数学函数：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>L</mi><mi>o</mi></msub><mo stretchy="false">(</mo><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>∫</mo><mi mathvariant="normal">Ω</mi></msub><msub><mi>f</mi><mi>r</mi></msub><mo stretchy="false">(</mo><mi mathvariant="bold">l</mi><mo separator="true">,</mo><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi mathvariant="bold">l</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi mathvariant="bold">n</mi><mo>⋅</mo><mi mathvariant="bold">l</mi><mo stretchy="false">)</mo><mi>d</mi><msub><mi>ω</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">L_o(\mathbf{v}) = \int_{\Omega} f_r(\mathbf{l}, \mathbf{v}) L_i(\mathbf{l}) (\mathbf{n} \cdot \mathbf{l}) d\omega_i
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">o</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2719em;vertical-align:-0.9119em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:-0.4336em;"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">Ω</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathbf">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathbf">l</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathbf">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbf">l</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p>其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mi>o</mi></msub><mo stretchy="false">(</mo><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L_o(\mathbf{v})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">o</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mclose">)</span></span></span></span> 是从表面出射的光线辐射度，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>r</mi></msub><mo stretchy="false">(</mo><mi mathvariant="bold">l</mi><mo separator="true">,</mo><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f_r(\mathbf{l}, \mathbf{v})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathbf">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mclose">)</span></span></span></span> 是BRDF，它描述了光线从方向 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">l</mi></mrow><annotation encoding="application/x-tex">\mathbf{l}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathbf">l</span></span></span></span> 入射并从方向 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">v</mi></mrow><annotation encoding="application/x-tex">\mathbf{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span></span></span> 出射的反射比例，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi mathvariant="bold">l</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L_i(\mathbf{l})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathbf">l</span><span class="mclose">)</span></span></span></span> 是从方向 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">l</mi></mrow><annotation encoding="application/x-tex">\mathbf{l}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathbf">l</span></span></span></span> 入射的光线辐射度，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">n</mi></mrow><annotation encoding="application/x-tex">\mathbf{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord mathbf">n</span></span></span></span> 是表面法线。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi mathvariant="bold">n</mi><mo>⋅</mo><mi mathvariant="bold">l</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\mathbf{n} \cdot \mathbf{l})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathbf">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbf">l</span><span class="mclose">)</span></span></span></span> 是兰伯特余弦项。BRDF通常由漫反射项（Diffuse）和镜面反射项（Specular）组成。</p>
</li>
</ul>
<h3 id="2-2-实时光照估计与阴影">2.2 实时光照估计与阴影</h3>
<p>让虚拟物体看起来真实，除了正确的材质表现，更重要的是要让它们沐浴在与真实环境相同的光线中，并投下与真实世界物体一致的阴影。</p>
<ul>
<li>
<p><strong>环境光照估计：</strong><br>
AR系统需要实时分析摄像头捕捉到的图像，估计出当前环境的光照条件。这通常包括：</p>
<ul>
<li><strong>主光源方向与强度：</strong> 识别场景中最亮的区域，推断主光源的方向（如太阳或室内灯光）和其颜色、强度。</li>
<li><strong>环境光探头（Environmental Probes / Cubemaps）：</strong> 将摄像头画面捕捉到的360度环境光信息烘焙成一张立方体贴图（Cubemap）。虚拟物体可以利用这张Cubemap进行环境映射，从而产生真实的反射效果，仿佛它们真的存在于这个环境中。</li>
<li><strong>球面谐波（Spherical Harmonics, SH）：</strong> SH是一种更紧凑、高效的环境光表示方式，能够捕获环境光的低频信息，常用于实时计算漫反射光照。</li>
</ul>
</li>
<li>
<p><strong>实时阴影：</strong><br>
阴影是虚拟物体“接地”的关键。没有阴影，虚拟物体看起来就像是漂浮在空中。AR中的阴影通常比传统游戏渲染更复杂，因为它们需要与真实环境无缝融合。</p>
<ul>
<li><strong>投影阴影：</strong> 最简单的方法是将虚拟物体的阴影直接投影到检测到的平面上（如地板）。这种方法计算量小，但可能不准确，因为它没有考虑真实世界物体的遮挡。</li>
<li><strong>实时阴影映射（Shadow Mapping）：</strong> 这是一种更通用的方法。从光源的角度渲染一次场景（包括虚拟物体和通过3D重建得到的真实环境网格），得到深度图（Shadow Map）。然后，在渲染虚拟物体时，通过比较像素的深度与Shadow Map中的深度来判断该像素是否处于阴影中。为了消除锯齿，通常会使用百分比靠近过滤（PCF）或级联阴影映射（CSM）等技术。</li>
<li><strong>环境光遮蔽（SSAO）：</strong> 屏幕空间环境光遮蔽（Screen Space Ambient Occlusion）能够模拟物体细节处由于被周围几何体遮挡而产生柔和的自阴影和接触阴影。</li>
</ul>
</li>
</ul>
<p>通过PBR和实时光照/阴影技术，我们可以极大地提高虚拟物体的视觉真实感，让它们在光影交错中与现实融为一体。</p>
<h2 id="第三章：物理引擎的核心——让虚拟物体“动”起来，并“碰撞”">第三章：物理引擎的核心——让虚拟物体“动”起来，并“碰撞”</h2>
<p>视觉上的逼真只是第一步。要让虚拟物体真正融入物理世界，它们必须能够遵循物理定律进行运动和交互，就如同真实物体一样。这就需要物理引擎的介入。</p>
<h3 id="3-1-为什么需要物理引擎？">3.1 为什么需要物理引擎？</h3>
<p>没有物理引擎，AR中的虚拟物体就是静态的、无生命的。它们不会对你的轻触作出反应，不会被重力拉向地面，更不会与其他虚拟或真实物体发生碰撞。物理引擎赋予了虚拟物体生命力，让它们能够：</p>
<ul>
<li><strong>模拟重力：</strong> 像真实物体一样下落。</li>
<li><strong>处理碰撞：</strong> 与其他物体（无论是虚拟的还是重建的真实物体）发生反弹、滑动或静止。</li>
<li><strong>施加力与力矩：</strong> 响应用户的输入（如滑动、抛掷）或环境中的虚拟风等。</li>
<li><strong>处理关节与约束：</strong> 模拟门、链条、布料等复杂结构。</li>
<li><strong>模拟摩擦与弹性：</strong> 让物体在碰撞后表现出不同的能量损失和形变。</li>
</ul>
<h3 id="3-2-刚体动力学">3.2 刚体动力学</h3>
<p>刚体动力学是物理引擎的基础。刚体是不会发生形变的理想化物体。</p>
<ul>
<li>
<p><strong>状态变量：</strong><br>
一个刚体的状态通常由以下变量描述：</p>
<ul>
<li>位置 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">x</mi></mrow><annotation encoding="application/x-tex">\mathbf{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord mathbf">x</span></span></span></span> （通常是质心位置）</li>
<li>姿态（方向）<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">q</mi></mrow><annotation encoding="application/x-tex">\mathbf{q}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.1944em;"></span><span class="mord mathbf">q</span></span></span></span> （通常是四元数或旋转矩阵）</li>
<li>线速度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">v</mi></mrow><annotation encoding="application/x-tex">\mathbf{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span></span></span></li>
<li>角速度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">ω</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{\omega}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">ω</span></span></span></span></span></span></li>
</ul>
</li>
<li>
<p><strong>牛顿运动定律：</strong><br>
物理引擎通过数值积分来模拟刚体的运动。核心是牛顿第二定律及其旋转形式：</p>
<ul>
<li><strong>线运动：</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">F</mi><mo>=</mo><mi>m</mi><mi mathvariant="bold">a</mi></mrow><annotation encoding="application/x-tex">\mathbf{F} = m \mathbf{a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">F</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord mathnormal">m</span><span class="mord mathbf">a</span></span></span></span><br>
力 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">F</mi></mrow><annotation encoding="application/x-tex">\mathbf{F}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">F</span></span></span></span> 导致线加速度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">a</mi></mrow><annotation encoding="application/x-tex">\mathbf{a}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord mathbf">a</span></span></span></span>，进而改变线速度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">v</mi></mrow><annotation encoding="application/x-tex">\mathbf{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span></span></span>。<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">v</mi><mo stretchy="false">(</mo><mi>t</mi><mo>+</mo><mi mathvariant="normal">Δ</mi><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold">v</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>+</mo><mi mathvariant="bold">a</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">\mathbf{v}(t+\Delta t) = \mathbf{v}(t) + \mathbf{a}(t) \Delta t
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Δ</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbf">a</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord">Δ</span><span class="mord mathnormal">t</span></span></span></span></span></p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">x</mi><mo stretchy="false">(</mo><mi>t</mi><mo>+</mo><mi mathvariant="normal">Δ</mi><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold">x</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>+</mo><mi mathvariant="bold">v</mi><mo stretchy="false">(</mo><mi>t</mi><mo>+</mo><mi mathvariant="normal">Δ</mi><mi>t</mi><mo stretchy="false">)</mo><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">\mathbf{x}(t+\Delta t) = \mathbf{x}(t) + \mathbf{v}(t+\Delta t) \Delta t
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbf">x</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Δ</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbf">x</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Δ</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord">Δ</span><span class="mord mathnormal">t</span></span></span></span></span></p>
</li>
<li><strong>角运动：</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">τ</mi><mo>=</mo><mi mathvariant="bold">I</mi><mi mathvariant="bold-italic">α</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{\tau} = \mathbf{I} \boldsymbol{\alpha}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.13472em;">τ</span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">I</span><span class="mord"><span class="mord"><span class="mord boldsymbol">α</span></span></span></span></span></span><br>
力矩 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">τ</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{\tau}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.13472em;">τ</span></span></span></span></span></span> 导致角加速度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">α</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{\alpha}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol">α</span></span></span></span></span></span>，进而改变角速度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">ω</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{\omega}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">ω</span></span></span></span></span></span>。<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold-italic">ω</mi><mo stretchy="false">(</mo><mi>t</mi><mo>+</mo><mi mathvariant="normal">Δ</mi><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold-italic">ω</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>+</mo><mi mathvariant="bold-italic">α</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mi mathvariant="normal">Δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{\omega}(t+\Delta t) = \boldsymbol{\omega}(t) + \boldsymbol{\alpha}(t) \Delta t
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">ω</span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Δ</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.03704em;">ω</span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord boldsymbol">α</span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord">Δ</span><span class="mord mathnormal">t</span></span></span></span></span></p>
姿态的更新通常通过四元数积分完成。</li>
</ul>
</li>
<li>
<p><strong>积分器：</strong><br>
常用的积分器包括：</p>
<ul>
<li><strong>欧拉积分（Euler Integration）：</strong> 最简单但精度较低，容易不稳定。</li>
<li><strong>Verlet积分（Verlet Integration）：</strong> 稳定性更好，常用于粒子系统。</li>
<li><strong>龙格-库塔方法（Runge-Kutta, RK4）：</strong> 精度高，但计算量大。<br>
在实时物理模拟中，通常会使用半隐式欧拉（Semi-Implicit Euler）或其他变体，在精度和性能之间取得平衡。</li>
</ul>
</li>
</ul>
<h3 id="3-3-碰撞检测">3.3 碰撞检测</h3>
<p>当两个物体可能接触时，物理引擎需要判断它们是否真的相交。</p>
<ul>
<li><strong>粗略阶段（Broad-Phase）：</strong><br>
首先，使用简单的包围体（如轴对齐包围盒AABB、有向包围盒OBB、球体）进行快速初步测试。如果包围体不相交，则物体肯定不相交。这大大减少了需要进行精细检测的物体对数量。常见的技术有BVT（Bounding Volume Trees）、SAP（Sweep and Prune）等。</li>
<li><strong>精细阶段（Narrow-Phase）：</strong><br>
对于通过粗略阶段测试的物体对，使用更精确的算法来判断它们是否实际相交，并计算出接触点、接触法线和穿透深度。
<ul>
<li><strong>GJK算法（Gilbert-Johnson-Keerthi）：</strong> 用于计算两个凸体之间的最小距离，如果距离为0或负数，则相交。</li>
<li><strong>EPA算法（Expanding Polytope Algorithm）：</strong> 在GJK之后使用，如果GJK发现相交，EPA可以计算出穿透深度和最近的接触点。</li>
<li><strong>分离轴定理（Separating Axis Theorem, SAT）：</strong> 适用于凸体，如果在任何一个轴上两个物体的投影不重叠，则它们不相交。</li>
</ul>
</li>
</ul>
<h3 id="3-4-碰撞响应">3.4 碰撞响应</h3>
<p>一旦检测到碰撞，物理引擎需要阻止物体穿透，并根据物理定律计算碰撞后的速度。</p>
<ul>
<li>
<p><strong>冲量（Impulse）：</strong> 碰撞通常被视为一个瞬时事件。物理引擎通过施加一个冲量来改变物体的动量，从而阻止穿透。<br>
冲量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi></mrow><annotation encoding="application/x-tex">J</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span> 与速度变化量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>v</mi></mrow><annotation encoding="application/x-tex">\Delta v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Δ</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span> 的关系：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>J</mi><mo>=</mo><mi>m</mi><mi mathvariant="normal">Δ</mi><mi>v</mi></mrow><annotation encoding="application/x-tex">J = m \Delta v
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">m</span><span class="mord">Δ</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span></span></p>
<p>对于两个碰撞物体 A 和 B，它们在接触法线方向上的相对速度变化量与冲量、质量和恢复系数（Restitution Coefficient, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span>）有关：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="bold">v</mi><mrow><mi>r</mi><mi>e</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>n</mi><mi>e</mi><mi>w</mi></mrow></msub><mo>=</mo><mo>−</mo><mi>ϵ</mi><msub><mi mathvariant="bold">v</mi><mrow><mi>r</mi><mi>e</mi><mi>l</mi><mi mathvariant="normal">_</mi><mi>o</mi><mi>l</mi><mi>d</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\mathbf{v}_{rel\_new} = -\epsilon \mathbf{v}_{rel\_old}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8114em;vertical-align:-0.367em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.367em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9503em;vertical-align:-0.367em;"></span><span class="mord">−</span><span class="mord mathnormal">ϵ</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.367em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p>其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="bold">v</mi><mrow><mi>r</mi><mi>e</mi><mi>l</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\mathbf{v}_{rel}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5944em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">re</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是相对速度。</p>
</li>
<li>
<p><strong>接触点（Contact Manifold）：</strong> 对于持续接触的物体（如一个球静止在地面上），物理引擎会管理一系列接触点，并计算一个持续的力来防止它们穿透。</p>
</li>
<li>
<p><strong>摩擦力：</strong> 摩擦力与接触面的法向力成正比，并方向与相对运动趋势相反。分为静摩擦和动摩擦。</p>
<ul>
<li>静摩擦力：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>s</mi></msub><mo>≤</mo><msub><mi>μ</mi><mi>s</mi></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">f_s \le \mu_s N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span></li>
<li>动摩擦力：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>k</mi></msub><mo>=</mo><msub><mi>μ</mi><mi>k</mi></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">f_k = \mu_k N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span><br>
其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">\mu_s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是静摩擦系数，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\mu_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 是动摩擦系数，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 是法向力。</li>
</ul>
</li>
</ul>
<h3 id="3-5-约束（Constraints）">3.5 约束（Constraints）</h3>
<p>约束用于模拟物体之间的连接关系，例如铰链（Hinge Joint）、滑块（Slider Joint）、球窝（Ball-and-Socket Joint）等。它们限制了物体的自由度，使得模拟更符合真实世界的连接方式。例如，模拟一扇门绕门轴旋转，或者一个链条的各个环节。</p>
<h3 id="3-6-物理引擎的集成">3.6 物理引擎的集成</h3>
<p>Unity和Unreal Engine等主流游戏引擎都内置了强大的物理引擎（Unity的PhysX和Havok，Unreal的Chaos）。AR应用开发者可以直接利用这些引擎提供的物理模拟能力，将虚拟模型转换为“刚体”并赋予其物理属性。</p>
<p>在AR中，一个关键的挑战是如何将真实环境的几何信息（通过SLAM重建的网格）导入物理引擎，使其成为虚拟物体可以与之碰撞的“静态碰撞体”。例如，SLAM检测到的地板和墙壁，可以被转换为物理引擎中的碰撞网格，让虚拟的球体在上面滚动，在墙壁上反弹。</p>
<h2 id="第四章：高级融合——超越基本物理模拟">第四章：高级融合——超越基本物理模拟</h2>
<p>实现了基础的物理行为后，我们还需要更精细的手段来增强虚实融合的真实感。</p>
<h3 id="4-1-虚实遮挡">4.1 虚实遮挡</h3>
<p>遮挡是判断一个物体是处于另一个物体之前还是之后的核心视觉线索。AR中的遮挡分为两种：</p>
<ul>
<li><strong>虚拟物体遮挡真实物体：</strong> 这是比较简单的。通过SLAM或深度传感器获取的真实环境深度信息，在渲染虚拟物体时，可以利用深度缓冲区（Depth Buffer）进行深度测试。如果虚拟物体的像素深度大于真实环境对应像素的深度，则该虚拟像素被真实环境遮挡，不予渲染。这使得虚拟物体可以被真实世界的墙壁、家具等遮挡，看起来更自然。</li>
<li><strong>真实物体遮挡虚拟物体（Real-on-Virtual Occlusion）：</strong> 这是AR中更具挑战性也更重要的一个方面。例如，当你的手伸到虚拟物体前面时，虚拟物体应该被你的手遮挡。这需要AR系统能够实时地识别并分割出前景中的真实物体（如手、身体），然后将这些区域渲染到虚拟物体之上。
<ul>
<li><strong>深度相机与前景分割：</strong> 如果AR设备配备了深度相机，可以直接利用深度信息来分割前景中的物体。</li>
<li><strong>语义分割与机器学习：</strong> 即使没有深度相机，也可以通过计算机视觉和深度学习模型（如U-Net、Mask R-CNN等）实时对摄像头图像进行语义分割，识别出前景中的人、手等物体。然后，这些分割出来的区域可以作为蒙版（Mask）或模板（Stencil Buffer），在渲染虚拟物体时进行遮挡。</li>
<li><strong>NeRFs与三维重建：</strong> 新兴的神经辐射场（NeRFs）和高斯泼溅（Gaussian Splatting）等技术正在探索如何更精确地重建和表示真实世界的三维场景，未来有望提供更鲁棒的实时遮挡方案。</li>
</ul>
</li>
</ul>
<h3 id="4-2-材质互动与物理属性推断">4.2 材质互动与物理属性推断</h3>
<p>一个虚拟的球在木地板上弹跳和在毛毯上弹跳，其弹跳高度和声音都应该不同。这需要AR系统能够：</p>
<ul>
<li><strong>识别真实世界材质：</strong> 通过计算机视觉和机器学习，分析图像纹理、颜色、光照反射等特征，推断出真实世界表面的材质类型（如木头、混凝土、金属、布料等）。</li>
<li><strong>动态调整物理参数：</strong> 根据识别出的材质，动态调整虚拟物体与该表面互动时的物理参数，例如摩擦系数（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mi>s</mi></msub><mo separator="true">,</mo><msub><mi>μ</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\mu_s, \mu_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>）、恢复系数（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">\epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ϵ</span></span></span></span>）。这样，同一个虚拟球在不同真实表面上就会表现出不同的物理行为。</li>
</ul>
<h3 id="4-3-流体与软体模拟">4.3 流体与软体模拟</h3>
<p>刚体模拟是基础，但真实世界中还有大量非刚体（如水、布料、头发等）。在AR中模拟这些对象是极具挑战性的。</p>
<ul>
<li><strong>流体模拟：</strong>
<ul>
<li><strong>粒子基方法（SPH, Smoothed Particle Hydrodynamics）：</strong> 将流体表示为一系列相互作用的粒子，通过计算粒子间的力来模拟流体行为。</li>
<li><strong>网格基方法（Grid-based Methods）：</strong> 将空间离散为网格，通过求解纳维-斯托克斯方程来模拟流体流动。<br>
这些方法计算量巨大，在移动AR设备上实时运行仍面临挑战，通常需要进行大量优化或简化。</li>
</ul>
</li>
<li><strong>软体模拟：</strong>
<ul>
<li><strong>弹簧-质点系统（Mass-Spring Systems）：</strong> 将软体离散为质点，质点之间通过弹簧连接，模拟形变。</li>
<li><strong>有限元方法（Finite Element Method, FEM）：</strong> 更精确但计算量更大的方法，将物体分解为小的有限元，通过求解弹性力学方程来模拟形变。<br>
软体模拟对于模拟布料、可变形的虚拟角色等至关重要，但同样受到计算资源的严格限制。</li>
</ul>
</li>
</ul>
<h3 id="4-4-空间音频与声学物理">4.4 空间音频与声学物理</h3>
<p>虚实融合不仅是视觉上的，听觉上的融合也至关重要。一个虚拟物体应该发出与它在空间中位置相符的声音，并且声音应该受到真实世界环境的声学特性影响。</p>
<ul>
<li><strong>空间音频（Spatial Audio）：</strong>
<ul>
<li><strong>头部相关传输函数（HRTF, Head-Related Transfer Function）：</strong> 模拟声音到达人耳时，头部、耳廓等对声音的过滤和反射效应，使人能够判断声音的来源方向和距离。</li>
<li><strong>声学物理：</strong> 根据真实环境的几何结构（通过SLAM重建的网格），模拟声音的传播、反射、吸收和遮挡。例如，一个虚拟音源在空旷的房间里听起来会和在充满家具的房间里不同（混响、回声）。</li>
<li><strong>声学射线追踪（Acoustic Ray Tracing）：</strong> 通过追踪声波路径来模拟声音在复杂环境中的传播，计算声音的延迟、衰减和反射。</li>
</ul>
</li>
</ul>
<p>结合视觉和听觉的深度融合，能够极大地提升用户的沉浸感，使他们真正感觉虚拟物体存在于其物理空间中。</p>
<h2 id="第五章：AI-ML的角色——让融合更智能、更自然">第五章：AI/ML的角色——让融合更智能、更自然</h2>
<p>人工智能和机器学习在AR的虚实融合中扮演着越来越重要的角色。它们是实现更高层次感知和智能交互的关键。</p>
<h3 id="5-1-语义理解与场景分析">5.1 语义理解与场景分析</h3>
<p>如前所述，AI通过深度学习模型可以对摄像头捕捉到的场景进行语义分割和物体识别。这使得AR系统不仅仅是“看到”几何体，还能“理解”它们的含义。这种理解可以指导：</p>
<ul>
<li><strong>智能放置：</strong> 虚拟物体可以被智能地放置在合适的真实物体上（如虚拟花瓶放在桌子上，而不是悬浮在空中）。</li>
<li><strong>物理属性推断：</strong> AI可以识别出“这是一个玻璃杯”，并自动为其赋予玻璃的物理属性（如透明度、折射率、较低的摩擦系数等），甚至推断其材质硬度，用于更精细的碰撞响应。</li>
<li><strong>交互逻辑：</strong> 根据识别出的物体，AR应用可以触发特定的交互逻辑，例如，识别到“门”时，虚拟门可能被赋予“开/关”的功能。</li>
</ul>
<h3 id="5-2-实时前景分割与抠图">5.2 实时前景分割与抠图</h3>
<p>对于“真实物体遮挡虚拟物体”的难题，AI的实时语义分割是目前最有效的解决方案之一。通过训练强大的神经网络模型，可以精确地识别出图像中的人体、手部等前景对象，并实时生成高精度的蒙版，从而实现像素级的真实物体遮挡虚拟物体。这在移动设备上尤其具有挑战性，需要高效的网络架构和推理优化。</p>
<h3 id="5-3-预测性物理与学习物理">5.3 预测性物理与学习物理</h3>
<p>传统的物理引擎是基于预设的物理定律和参数进行模拟。然而，现实世界充满了复杂性，一些现象难以精确建模。AI/ML可以用于：</p>
<ul>
<li><strong>学习物理参数：</strong> 通过观察真实世界的互动数据，AI模型可以学习并预测更精确的摩擦系数、恢复系数等。</li>
<li><strong>预测复杂行为：</strong> 对于一些难以通过传统物理方程实时模拟的复杂现象（如软体形变、布料摆动），可以训练神经网络模型来预测其行为，从而在保证性能的同时，提高真实感。</li>
<li><strong>纠正误差：</strong> 在SLAM或深度传感器数据不准确时，AI可以帮助校正物理模拟的偏差，使虚拟物体与现实环境的交互更稳定、更自然。</li>
</ul>
<h3 id="5-4-神经渲染与三维重建的融合">5.4 神经渲染与三维重建的融合</h3>
<p>NeRF（Neural Radiance Fields）和高斯泼溅（3D Gaussian Splatting）等新兴的神经渲染技术，正革命性地改变我们重建和渲染三维场景的方式。它们通过神经网络直接学习场景的几何和外观表示，能够从少量图像生成逼真的新视角图像。将这些技术与AR结合，有望实现：</p>
<ul>
<li><strong>超高真实感渲染：</strong> 直接从真实场景的光照和几何中学习，生成与真实环境无缝融合的虚拟物体。</li>
<li><strong>更精确的遮挡：</strong> 神经渲染重建的场景可以提供更精确的深度和语义信息，从而实现更自然的虚实遮挡。</li>
<li><strong>动态环境重建：</strong> 克服传统SLAM在动态场景下的限制，实现对移动物体或可变形场景的实时重建和理解。</li>
</ul>
<h2 id="第六章：挑战与未来方向">第六章：挑战与未来方向</h2>
<p>尽管AR在虚实融合方面取得了长足进步，但仍面临诸多挑战，也蕴藏着巨大的发展潜力。</p>
<h3 id="6-1-计算资源限制">6.1 计算资源限制</h3>
<p>尤其是在移动AR设备上，实时运行复杂的SLAM、物理模拟、PBR渲染、AI推理以及高级遮挡和空间音频，对计算资源（CPU、GPU、NPU）是巨大的考验。性能优化、算法创新和专用硬件加速是解决这一问题的关键。</p>
<h3 id="6-2-鲁棒性与精度">6.2 鲁棒性与精度</h3>
<ul>
<li><strong>SLAM漂移：</strong> 即使有回环检测，长时间或在大范围场景下，SLAM仍可能累积误差，导致虚拟物体漂移。</li>
<li><strong>传感器噪声与校准：</strong> 深度传感器数据可能存在噪声和误差。不同传感器的精确校准和融合也是难题。</li>
<li><strong>光照估计不准确：</strong> 复杂或动态光照环境下的实时光照估计仍不完美，可能导致虚拟物体与真实场景的光影不符。</li>
</ul>
<h3 id="6-3-动态环境的适应性">6.3 动态环境的适应性</h3>
<p>当前AR系统对动态环境（如移动的人、物体）的适应性仍有限。当真实环境发生显著变化时，已建立的地图和物理模型可能会失效，导致AR体验中断或不真实。未来的AR系统需要更强大的能力来实时更新环境模型，并区分静态和动态对象。</p>
<h3 id="6-4-交互与触觉反馈">6.4 交互与触觉反馈</h3>
<p>目前AR的交互主要依赖手势、语音或控制器。缺乏真实的触觉反馈是虚实融合的一大障碍。如何让用户“感受”到虚拟物体的存在，触觉设备、力反馈技术以及更自然的交互方式（如神经接口）是未来的重要研究方向。</p>
<h3 id="6-5-隐私与伦理">6.5 隐私与伦理</h3>
<p>随着AR系统对真实世界的感知能力越来越强，特别是涉及到实时3D重建、语义理解和人脸/物体识别时，数据隐私和伦理问题将变得更加突出。需要在技术发展的同时，建立完善的法律法规和伦理规范。</p>
<h3 id="6-6-迈向无缝的“混合现实”">6.6 迈向无缝的“混合现实”</h3>
<p>最终，AR的目标是实现无缝的“混合现实”（Mixed Reality, MR），即虚拟物体与真实世界能够完全无差别地共存和交互。这需要突破现有AR的显示、感知、交互和计算瓶颈。下一代AR设备（如智能眼镜）将更加轻便、强大，并可能集成更多的传感器和AI能力。开放标准、开发者工具和更丰富的3D内容生态也将加速这一进程。</p>
<h2 id="结论">结论</h2>
<p>AR与物理世界的虚实融合，是一个融合了计算机视觉、计算机图形学、物理模拟和人工智能等多学科知识的宏大工程。从对物理世界的精确感知（SLAM、环境重建），到视觉上的光影无缝融合（PBR、实时光照/阴影、遮挡），再到物理层面的交互与响应（刚体动力学、碰撞检测与响应、约束），以及AI/ML的智能化赋能，每一步都凝聚着科研人员和工程师的智慧与努力。</p>
<p>我们正从简单的虚拟信息叠加，走向一个虚拟内容能够真正“存在”于物理世界，并与我们、与真实环境进行智能互动的未来。这不仅仅是技术上的飞跃，更将深刻改变我们与信息、与物理世界互动的方式。想象一个世界，在那里，你的客厅可以随时变成一个虚拟的实验室，你的办公桌可以扩展为无限的创作空间，而这些虚拟的工具和对象，都将如同真实世界中的物品一般，遵循着精确的物理法则。</p>
<p>这场深度物理模拟之旅才刚刚开始，但其最终目的地无疑将是那个——虚实难辨，浑然一体的奇妙世界。让我们拭目以待，并共同参与到这场定义未来的技术变革中来！</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/qmwneb946">qmwneb946</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://qmwneb946.dpdns.org/2025/07/23/2025-07-24-052927/">https://qmwneb946.dpdns.org/2025/07/23/2025-07-24-052927/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://opensource.org/licenses/MIT" target="_blank">MIT License</a> 许可协议。转载请注明来源 <a href="https://qmwneb946.dpdns.org" target="_blank">qmwneb946 的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/2025/">2025</a><a class="post-meta__tags" href="/tags/%E6%8A%80%E6%9C%AF/">技术</a><a class="post-meta__tags" href="/tags/AR%E4%B8%8E%E7%89%A9%E7%90%86%E4%B8%96%E7%95%8C%E7%9A%84%E8%99%9A%E5%AE%9E%E8%9E%8D%E5%90%88/">AR与物理世界的虚实融合</a></div><div class="post-share"><div class="social-share" data-image="/img/icon.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/07/23/2025-07-24-053108/" title="量子近似优化算法（QAOA）：连接经典优化与量子计算的桥梁"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">量子近似优化算法（QAOA）：连接经典优化与量子计算的桥梁</div></div><div class="info-2"><div class="info-item-1">你好，我是 qmwneb946，一名热爱探索技术前沿、深耕数学奥秘的博主。今天，我们将一同踏上一段激动人心的旅程，深入剖析一个在量子计算领域备受瞩目的算法——量子近似优化算法（Quantum Approximate Optimization Algorithm, QAOA）。这个算法不仅代表了量子计算在解决实际问题上的巨大潜力，更体现了经典计算与量子计算协同工作的精妙艺术。 经典优化问题无处不在，从物流配送路径规划到金融投资组合优化，从药物分子结构设计到人工智能模型的训练，其重要性不言而喻。然而，许多这类问题，特别是组合优化问题，随着规模的增长，其复杂性呈指数级爆炸，使得即使是当今最强大的超级计算机也束手无策。这就是著名的NP-hard问题，它们在理论上被认为是“难以求解”的。传统算法在面对这类问题时，往往只能退而求其次，寻求启发式解或近似解，且随着问题规模的增大，其性能差距日益显著。 近年来，随着量子计算技术的突飞猛进，人们开始将目光投向量子领域，希望利用量子力学独特的叠加性、纠缠和干涉等特性，为这些“顽固”的优化难题带来新的曙光。量子计算并非万能钥匙，但在某些特定问题上，它展...</div></div></div></a><a class="pagination-related" href="/2025/07/23/2025-07-24-045920/" title="虚实交融：VR中化身与社交临场感的深度探索"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">虚实交融：VR中化身与社交临场感的深度探索</div></div><div class="info-2"><div class="info-item-1">你好，各位技术爱好者和数字世界的探索者！我是你们的老朋友qmwneb946。 虚拟现实（VR）技术正以惊人的速度重塑我们对“存在”和“连接”的理解。曾几何时，它似乎只是科幻小说中的奇思妙想，如今却已成为一个日益成熟、充满无限可能的领域。从沉浸式的游戏体验到远程协作，再到虚拟社交空间，VR正在模糊物理世界与数字世界之间的界限。然而，要真正实现VR的潜能，仅仅提供令人惊叹的视觉效果是远远不够的。 在VR的广阔天地中，有两个核心概念对构建有意义、引人入胜的体验至关重要，它们是本文的焦点：化身（Avatars） 和 社交临场感（Social Presence）。化身是我们虚拟世界的身体，是我们与他人互动、表达自我的媒介。而社交临场感，则是指在虚拟环境中与他人同在、共享空间的真实感受。这两者并非独立存在，而是相互依存、彼此强化的。一个逼真且富有表现力的化身，能够极大地增强你的社交临场感；反之，强大的社交临场感也依赖于化身所承载的各种非语言线索和交互能力。 今天的文章，我将带领大家深入探讨化身与社交临场感在VR中的交织作用。我们将从对社交临场感的理解出发，剖析化身的设计哲学、技术实现细节，并...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/07/18/2025-07-18-082448/" title="数据挖掘在金融风控的应用：从算法到实践"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-18</div><div class="info-item-2">数据挖掘在金融风控的应用：从算法到实践</div></div><div class="info-2"><div class="info-item-1">大家好，我是你们的技术博主，今天我们来深入探讨一个与我们日常生活息息相关，却又充满技术挑战的领域：金融风控。在这个领域中，数据挖掘技术发挥着越来越重要的作用，它帮助金融机构有效识别和管理风险，保障金融体系的稳定运行。本文将从多个角度深入探讨数据挖掘在金融风控中的应用，并结合实际案例进行分析。 数据挖掘在金融风控中的关键作用 金融风控的目标是识别、评估和控制各种金融风险，例如信用风险、欺诈风险、操作风险等。传统的风控方法往往依赖于人工审核和简单的统计模型，效率低、准确率不高。而数据挖掘技术的出现，为金融风控带来了革命性的变革。它能够从海量数据中提取有价值的信息，建立更精确的风险模型，从而提高风控效率和准确性。 具体来说，数据挖掘在金融风控中主要发挥以下作用： 欺诈检测 欺诈行为日益猖獗，给金融机构造成巨大的经济损失。数据挖掘技术，特别是异常检测算法，能够有效识别出可疑交易行为。例如，基于机器学习的异常检测模型可以学习正常交易的模式，然后识别偏离该模式的异常交易，从而有效识别潜在的欺诈行为。常用的算法包括：  孤立森林 (Isolation Forest): 通过随机分割数据来隔离异...</div></div></div></a><a class="pagination-related" href="/2025/07/18/2025-07-18-082509/" title="虚拟现实技术的沉浸式体验：从感知到认知"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-18</div><div class="info-item-2">虚拟现实技术的沉浸式体验：从感知到认知</div></div><div class="info-2"><div class="info-item-1">虚拟现实（VR）技术不再是科幻小说中的幻想，它已经逐渐融入我们的生活，并正在深刻地改变着我们与世界互动的方式。本文将深入探讨VR技术的沉浸式体验，从技术原理到感知机制，再到其潜在的应用和未来发展方向，为技术爱好者提供一个全面的视角。 沉浸式体验的奥秘：技术层面 VR技术能够创造出令人信服的沉浸式体验，这依赖于多项关键技术的协同作用。 显示技术与图像渲染 高质量的图像渲染是VR体验的关键。高分辨率、高刷新率的显示器能够有效减少画面延迟和模糊感，提升视觉舒适度。目前主流的VR头显大多采用OLED或LCD屏幕，并通过透镜系统将图像投射到用户的视网膜上，模拟真实世界的视觉体验。  为了实现更广阔的视野（FOV），厂商们也在不断改进透镜设计和显示面板技术。 空间音频技术 除了视觉，听觉在构建沉浸式环境中也扮演着至关重要的角色。空间音频技术通过模拟声音在三维空间中的传播，让用户能够准确感知声音的方位和距离，增强临场感。例如，头部追踪技术配合精密的算法，可以根据用户头部姿态实时调整声音的输出，使声音效果更加逼真。 追踪技术与交互方式 精确的追踪技术是VR体验流畅的关键。目前常用的追踪技术包括：...</div></div></div></a><a class="pagination-related" href="/2025/07/18/2025-07-18-082730/" title="有机合成中的手性催化技术：构建分子世界的精巧艺术"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-18</div><div class="info-item-2">有机合成中的手性催化技术：构建分子世界的精巧艺术</div></div><div class="info-2"><div class="info-item-1">有机合成，这门将简单的化学物质转化为复杂分子的艺术，正因手性分子的存在而变得更加精妙和挑战性。手性分子如同左右手一样，结构互为镜像，但性质却可能大相径庭。在药物研发、材料科学等领域，获得特定手性的分子至关重要，而手性催化技术正是实现这一目标的关键。本文将深入探讨有机合成中的手性催化技术，揭示其背后的原理和应用。 手性与手性催化：从镜像到精准控制 手性，源于希腊语“cheir”（手），指的是分子不能与其镜像重合的特性。这种结构差异导致手性分子具有不同的物理性质和生物活性。例如，一种药物的左旋体可能具有疗效，而其右旋体则可能无效甚至有害。因此，精准控制手性合成至关重要。 手性催化技术利用手性催化剂来控制反应的立体选择性，即优先生成特定手性的产物。催化剂本身是手性的，它通过与反应物形成短暂的超分子复合物，影响反应路径，从而引导反应朝特定立体异构体方向进行。这就好比一个熟练的工匠，用巧妙的手法引导反应物“组装”成预期的分子结构。 手性催化剂的类型及作用机制 目前，广泛应用的手性催化剂主要包括： 过渡金属配合物催化剂 这类催化剂通常含有手性配体与过渡金属中心（如铑、钌、钯等）结合而成。配体...</div></div></div></a><a class="pagination-related" href="/2025/07/18/2025-07-18-082852/" title="光谱分析技术在环境监测的应用：从原理到实践"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-18</div><div class="info-item-2">光谱分析技术在环境监测的应用：从原理到实践</div></div><div class="info-2"><div class="info-item-1">大家好，我是你们的技术博主 DataWhisperer！今天我们来聊一个既高大上又贴近生活的技术领域：光谱分析技术在环境监测中的应用。  这可不是简单的“看看颜色”就能搞定的，它背后蕴含着丰富的物理学、化学和数学原理，并且在保护我们的环境方面发挥着越来越重要的作用。 引言：光谱分析 – 环境监测的“火眼金睛” 环境监测的目标是及时、准确地获取环境污染物的信息，为环境保护和管理提供科学依据。传统监测方法往往费时费力，且灵敏度有限。而光谱分析技术，凭借其快速、灵敏、多组分同时检测等优点，成为了环境监测领域的一匹黑马。  它利用物质与电磁辐射相互作用的特性，分析物质的成分和结构，从而实现对环境污染物的精准识别和定量分析。 光谱分析技术的种类及原理 光谱分析技术涵盖多种方法，根据所用电磁波的波长范围不同，可以分为： 紫外-可见光谱法 (UV-Vis) UV-Vis 光谱法利用物质对紫外和可见光区域电磁波的吸收特性进行分析。  不同物质具有独特的吸收光谱，通过测量吸收光谱的特征峰，可以确定物质的种类和浓度。  这在水质监测中应用广泛，例如检测重金属离子、有机污染物等。  其原理基于朗伯-比...</div></div></div></a><a class="pagination-related" href="/2025/07/18/2025-07-18-082903/" title="计算化学模拟分子间相互作用：从经典力场到量子力学"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-18</div><div class="info-item-2">计算化学模拟分子间相互作用：从经典力场到量子力学</div></div><div class="info-2"><div class="info-item-1">引言 分子间相互作用是化学和生物学领域的核心概念，它支配着物质的物理和化学性质，例如溶解度、沸点、蛋白质折叠等等。精确地模拟这些相互作用对于理解和预测分子行为至关重要。计算化学为我们提供了一套强大的工具来研究分子间相互作用，从经典的力场方法到复杂的量子力学计算，本文将深入探讨这些方法及其应用。 经典力场方法 经典力场方法基于牛顿力学，将分子简化为一系列原子，并通过经验参数化的势能函数来描述原子间的相互作用。这种方法计算效率高，适用于模拟大量的原子和分子，例如蛋白质、DNA和材料科学中的大分子体系。 势能函数 经典力场通常包含以下几种类型的相互作用项：  键伸缩 (Bond Stretching): 描述键长偏离平衡键长的能量变化，通常用谐振势能函数表示：Ebond=12kb(r−r0)2E_{bond} = \frac{1}{2}k_b(r - r_0)^2Ebond​=21​kb​(r−r0​)2，其中 kbk_bkb​ 是力常数，rrr 是键长，r0r_0r0​ 是平衡键长。 键角弯曲 (Angle Bending): 描述键角偏离平衡键角的能量变化，通常也用谐振势能函数表示...</div></div></div></a><a class="pagination-related" href="/2025/07/18/2025-07-18-082912/" title="绿色化学与可持续发展目标：技术与未来的融合"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-18</div><div class="info-item-2">绿色化学与可持续发展目标：技术与未来的融合</div></div><div class="info-2"><div class="info-item-1">近年来，可持续发展已成为全球关注的焦点，联合国提出的17个可持续发展目标 (SDGs) 为全球共同努力提供了蓝图。其中，许多目标都与化学工业息息相关，而绿色化学作为一种旨在减少或消除有害物质使用的化学方法，扮演着至关重要的角色。本文将探讨绿色化学如何为实现可持续发展目标做出贡献，并从技术角度深入分析其应用。 绿色化学的十二原则：通向可持续未来的基石 绿色化学的核心是其十二项原则，这些原则指导着化学家的研究和工业生产，力求最大限度地减少环境影响。这些原则并非相互独立，而是相互关联，共同构成了一个整体的框架。 预防原则 这是绿色化学的首要原则，强调在化学反应的设计阶段就应避免产生有害物质，而非在产生后进行处理。这需要化学家们从根本上重新思考化学反应的设计和工艺流程。 原子经济性 理想情况下，所有反应物原子都应转化为最终产物，没有任何浪费。原子经济性是衡量化学反应效率的重要指标，其计算公式为： 原子经济性=目标产物的分子量所有反应物的分子量总和×100%原子经济性 = \frac{目标产物的分子量}{所有反应物的分子量总和} \times 100\%原子经济性=所有反应物的分子量总和目...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">qmwneb946</div><div class="author-info-description">一个专注于技术分享的个人博客，涵盖编程、算法、系统设计等内容</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">1352</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">1356</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/qmwneb946"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/qmwneb946" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:qmwneb946@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">代码与远方，技术与生活交织的篇章。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E6%84%9F%E7%9F%A5%E4%B8%8E%E7%90%86%E8%A7%A3%E7%89%A9%E7%90%86%E4%B8%96%E7%95%8C%E2%80%94%E2%80%94AR%E7%9A%84%E2%80%9C%E7%9C%BC%E7%9D%9B%E2%80%9D%E4%B8%8E%E2%80%9C%E5%A4%A7%E8%84%91%E2%80%9D"><span class="toc-number">1.</span> <span class="toc-text">第一章：感知与理解物理世界——AR的“眼睛”与“大脑”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%AE%9E%E6%97%B6%E5%AE%9A%E4%BD%8D%E4%B8%8E%E5%9C%B0%E5%9B%BE%E6%9E%84%E5%BB%BA%EF%BC%88SLAM%EF%BC%89"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 实时定位与地图构建（SLAM）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E7%8E%AF%E5%A2%83%E7%90%86%E8%A7%A3%E4%B8%8E%E9%87%8D%E5%BB%BA"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 环境理解与重建</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E8%A7%86%E8%A7%89%E8%9E%8D%E5%90%88%E7%9A%84%E8%89%BA%E6%9C%AF%E2%80%94%E2%80%94%E8%AE%A9%E8%99%9A%E6%8B%9F%E7%89%A9%E4%BD%93%E2%80%9C%E7%9C%8B%E2%80%9D%E8%B5%B7%E6%9D%A5%E7%9C%9F%E5%AE%9E"><span class="toc-number">2.</span> <span class="toc-text">第二章：视觉融合的艺术——让虚拟物体“看”起来真实</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%89%A9%E7%90%86%E6%B8%B2%E6%9F%93%EF%BC%88PBR%EF%BC%89"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 物理渲染（PBR）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%AE%9E%E6%97%B6%E5%85%89%E7%85%A7%E4%BC%B0%E8%AE%A1%E4%B8%8E%E9%98%B4%E5%BD%B1"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 实时光照估计与阴影</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9A%E7%89%A9%E7%90%86%E5%BC%95%E6%93%8E%E7%9A%84%E6%A0%B8%E5%BF%83%E2%80%94%E2%80%94%E8%AE%A9%E8%99%9A%E6%8B%9F%E7%89%A9%E4%BD%93%E2%80%9C%E5%8A%A8%E2%80%9D%E8%B5%B7%E6%9D%A5%EF%BC%8C%E5%B9%B6%E2%80%9C%E7%A2%B0%E6%92%9E%E2%80%9D"><span class="toc-number">3.</span> <span class="toc-text">第三章：物理引擎的核心——让虚拟物体“动”起来，并“碰撞”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E7%89%A9%E7%90%86%E5%BC%95%E6%93%8E%EF%BC%9F"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 为什么需要物理引擎？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%88%9A%E4%BD%93%E5%8A%A8%E5%8A%9B%E5%AD%A6"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 刚体动力学</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 碰撞检测</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E7%A2%B0%E6%92%9E%E5%93%8D%E5%BA%94"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 碰撞响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E7%BA%A6%E6%9D%9F%EF%BC%88Constraints%EF%BC%89"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 约束（Constraints）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E7%89%A9%E7%90%86%E5%BC%95%E6%93%8E%E7%9A%84%E9%9B%86%E6%88%90"><span class="toc-number">3.6.</span> <span class="toc-text">3.6 物理引擎的集成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9A%E9%AB%98%E7%BA%A7%E8%9E%8D%E5%90%88%E2%80%94%E2%80%94%E8%B6%85%E8%B6%8A%E5%9F%BA%E6%9C%AC%E7%89%A9%E7%90%86%E6%A8%A1%E6%8B%9F"><span class="toc-number">4.</span> <span class="toc-text">第四章：高级融合——超越基本物理模拟</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E8%99%9A%E5%AE%9E%E9%81%AE%E6%8C%A1"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 虚实遮挡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%9D%90%E8%B4%A8%E4%BA%92%E5%8A%A8%E4%B8%8E%E7%89%A9%E7%90%86%E5%B1%9E%E6%80%A7%E6%8E%A8%E6%96%AD"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 材质互动与物理属性推断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%B5%81%E4%BD%93%E4%B8%8E%E8%BD%AF%E4%BD%93%E6%A8%A1%E6%8B%9F"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 流体与软体模拟</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E7%A9%BA%E9%97%B4%E9%9F%B3%E9%A2%91%E4%B8%8E%E5%A3%B0%E5%AD%A6%E7%89%A9%E7%90%86"><span class="toc-number">4.4.</span> <span class="toc-text">4.4 空间音频与声学物理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9AAI-ML%E7%9A%84%E8%A7%92%E8%89%B2%E2%80%94%E2%80%94%E8%AE%A9%E8%9E%8D%E5%90%88%E6%9B%B4%E6%99%BA%E8%83%BD%E3%80%81%E6%9B%B4%E8%87%AA%E7%84%B6"><span class="toc-number">5.</span> <span class="toc-text">第五章：AI&#x2F;ML的角色——让融合更智能、更自然</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E8%AF%AD%E4%B9%89%E7%90%86%E8%A7%A3%E4%B8%8E%E5%9C%BA%E6%99%AF%E5%88%86%E6%9E%90"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 语义理解与场景分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E5%AE%9E%E6%97%B6%E5%89%8D%E6%99%AF%E5%88%86%E5%89%B2%E4%B8%8E%E6%8A%A0%E5%9B%BE"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 实时前景分割与抠图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E9%A2%84%E6%B5%8B%E6%80%A7%E7%89%A9%E7%90%86%E4%B8%8E%E5%AD%A6%E4%B9%A0%E7%89%A9%E7%90%86"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 预测性物理与学习物理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E7%A5%9E%E7%BB%8F%E6%B8%B2%E6%9F%93%E4%B8%8E%E4%B8%89%E7%BB%B4%E9%87%8D%E5%BB%BA%E7%9A%84%E8%9E%8D%E5%90%88"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 神经渲染与三维重建的融合</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9A%E6%8C%91%E6%88%98%E4%B8%8E%E6%9C%AA%E6%9D%A5%E6%96%B9%E5%90%91"><span class="toc-number">6.</span> <span class="toc-text">第六章：挑战与未来方向</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E8%AE%A1%E7%AE%97%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 计算资源限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E9%B2%81%E6%A3%92%E6%80%A7%E4%B8%8E%E7%B2%BE%E5%BA%A6"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 鲁棒性与精度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E5%8A%A8%E6%80%81%E7%8E%AF%E5%A2%83%E7%9A%84%E9%80%82%E5%BA%94%E6%80%A7"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 动态环境的适应性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E4%BA%A4%E4%BA%92%E4%B8%8E%E8%A7%A6%E8%A7%89%E5%8F%8D%E9%A6%88"><span class="toc-number">6.4.</span> <span class="toc-text">6.4 交互与触觉反馈</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-%E9%9A%90%E7%A7%81%E4%B8%8E%E4%BC%A6%E7%90%86"><span class="toc-number">6.5.</span> <span class="toc-text">6.5 隐私与伦理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-%E8%BF%88%E5%90%91%E6%97%A0%E7%BC%9D%E7%9A%84%E2%80%9C%E6%B7%B7%E5%90%88%E7%8E%B0%E5%AE%9E%E2%80%9D"><span class="toc-number">6.6.</span> <span class="toc-text">6.6 迈向无缝的“混合现实”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-number">7.</span> <span class="toc-text">结论</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/26/hello-world/" title="Hello World">Hello World</a><time datetime="2025-07-26T07:58:51.118Z" title="发表于 2025-07-26 15:58:51">2025-07-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/26/%E5%8D%9A%E5%BC%88%E8%AE%BA%E5%9F%BA%E7%A1%80/" title="博弈论基础">博弈论基础</a><time datetime="2025-07-26T07:58:51.118Z" title="发表于 2025-07-26 15:58:51">2025-07-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/25/2025-07-26-075557/" title="细胞命运的守护者：深入探索蛋白质降解途径的精妙调控">细胞命运的守护者：深入探索蛋白质降解途径的精妙调控</a><time datetime="2025-07-25T23:55:57.000Z" title="发表于 2025-07-26 07:55:57">2025-07-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/25/2025-07-26-075347/" title="揭秘微观世界的无限可能：单细胞基因组测序技术深度解析">揭秘微观世界的无限可能：单细胞基因组测序技术深度解析</a><time datetime="2025-07-25T23:53:47.000Z" title="发表于 2025-07-26 07:53:47">2025-07-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/25/2025-07-26-075236/" title="细胞极性：生命微观世界的精巧蓝图与动态调控">细胞极性：生命微观世界的精巧蓝图与动态调控</a><time datetime="2025-07-25T23:52:36.000Z" title="发表于 2025-07-26 07:52:36">2025-07-26</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;2025 By qmwneb946</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.2</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(async () => {
  const showKatex = () => {
    document.querySelectorAll('#article-container .katex').forEach(el => el.classList.add('katex-show'))
  }

  if (!window.katex_js_css) {
    window.katex_js_css = true
    await btf.getCSS('https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css')
    if (true) {
      await btf.getScript('https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js')
    }
  }

  showKatex()
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const createScriptElement = config => {
    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => {
      ele.setAttribute(key, value)
    })
    return ele
  }

  const loadGiscus = (el = document, key) => {
    const mappingConfig = isShuoshuo
      ? { 'data-mapping': 'specific', 'data-term': key }
      : { 'data-mapping': (option && option['data-mapping']) || 'pathname' }

    const giscusConfig = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'qmwneb946/blog',
      'data-repo-id': 'R_kgDOPM6cWw',
      'data-category-id': 'DIC_kwDOPM6cW84CtEzo',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true,
      ...option,
      ...mappingConfig
    }

    const scriptElement = createScriptElement(giscusConfig)

    el.querySelector('#giscus-wrap').appendChild(scriptElement)

    if (isShuoshuo) {
      window.shuoshuoComment.destroyGiscus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.app')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if (isShuoshuo) {
    'Giscus' === 'Giscus'
      ? window.shuoshuoComment = { loadComment: loadGiscus }
      : window.loadOtherComment = loadGiscus
    return
  }

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>